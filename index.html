<!DOCTYPE html>
<html>
	<head>
		<link rel="shortcut icon" type="image/x-icon" href="compass.png" />
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<script type="text/javascript" 
               src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCEdu23sATw9F3n0jzTq37poQMKVLrxTYc"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<title>It's time for an adventure!</title>
	</head>
	<body>
		<!-- <script>
  		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  		ga('create', 'UA-84082917-4', 'auto');
  		ga('send', 'pageview');

		</script> -->

		<div id="header">
			<img id="logo" src="adventuring.png">
			<div id="nav">
				<ul>
					<li><a href="categories/nature.html">NATURE</a></li>
					<li><a href="categories/city.html">CITY</a></li>
					<li><a href="categories/far-away.html">FAR AWAY</a></li>
					<li><a href="categories/free.html">FREE</a></li>
					<li><a href="categories/kids.html">KIDS</a></li>
					<li><a href="categories/fun.html">FUN</a></li>
				</ul>
			</div>
		</div>
			<div id="feature">
				<form name="myform" action="" ="" method="GET">Enter your location in the box<br>
     			<input id="input_location" type="text" name="inputbox" value=""> <br>
     			<input id="button_submit" type="button" name="button" Value="Find my adventure">
      			</form>
				<div id="form-input"></div>
			</div>
		
			<div class="article column1">
				<p id="title"></p>
      			<p id="description"></p>
			</div>
		
			<div class="article column2">
				<div id="panel"></div>
			</div>
			
		<div class="article column3">
			<div id="map"></div>
		</div>

		<script type="text/javascript"> 
			
			document.getElementByClassName('article column1').style.visibility = "hidden";
			document.getElementByClassName('article column2').style.visibility = "hidden";
			document.getElementByClassName('article column3').style.visibility = "hidden";
			
			$(document).ready(function() {
				$('#button_submit').click(function(){
					
			document.getElementByClassName('article column1').style.visibility = "visible";
			document.getElementByClassName('article column2').style.visibility = "visible";
			document.getElementByClassName('article column3').style.visibility = "visible";
					
					var directionsService = new google.maps.DirectionsService();
					var directionsDisplay = new google.maps.DirectionsRenderer();

					var map = new google.maps.Map(
					     document.getElementById('map'), {
						zoom	  : 7,
						mapTypeId : google.maps.MapTypeId.ROADMAP
					     }
					);

					directionsDisplay.setMap(map);
					directionsDisplay.setPanel(document.getElementById('panel'));

					$.get("adventure_data.json", function(response) {

						var json 	= jQuery.parseJSON(JSON.stringify(response));
						var randomJsonObject  = json[Math.floor(Math.random() * json.length)];

						document.getElementById('title'      ).innerHTML = randomJsonObject.title;
						document.getElementById('description').innerHTML = randomJsonObject.description;

							   var request = {
								origin		: $('#input_location').val(), 
								destination	: randomJsonObject.location,
								travelMode	: google.maps.DirectionsTravelMode.TRANSIT
							   }

							   directionsService.route(request, function(response, status) {
								if (status == google.maps.DirectionsStatus.OK) {
									directionsDisplay.setDirections(response);
								}
							   });
					 });
					
					$('#feature').hide();
				});
			});
			
			
       				



       	</script>
	</body>
</html>
